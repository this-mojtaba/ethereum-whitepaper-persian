# درخت‌های مرکل (Merkle Trees)

(سمت چپ) برای اثبات اعتبار یک شاخه در درخت مرکل، ارائهٔ تنها تعداد کمی از گره‌ها کافی است.  
(سمت راست) هرگونه تلاش برای تغییر هر بخش از درخت مرکل، در نهایت به بروز یک ناسازگاری در جایی از زنجیره منجر می‌شود.

سمت راستی

```text
                [ 219c ]
                   |
          ---------------------
          |                   |
        [48a5]              [d063]
          |                   |
     ------------        ------------
     |          |        |          |
  [1328]     [d8ca]   [e74b]     [a8b5]
     |          |        |          |
  [0187]     [12c5]   ALICE → BOB
                          20 BTC

```

سمت چپی

```text

                [ 219c ]
                   |
          ---------------------
          |                   |
        [48a5]              [d063]
          |                   |
     ------------        ------------
     |          |        |          |
  [1328]     [d8ca]   [94bc] ❌
     |          |        |
  [0187]     [12c5]   ALICE → EVE
                          20 BTC
```

یکی از ویژگی‌های مهم بیت‌کوین از نظر مقیاس‌پذیری این است که بلاک‌ها در یک ساختار داده‌ای چندسطحی ذخیره می‌شوند. «هش» یک بلاک در واقع تنها هش سرآیند بلاک (Block Header) است؛ داده‌ای با حجمی در حدود ۲۰۰ بایت که شامل برچسب زمانی، نانس، هش بلاک قبلی و هش ریشهٔ ساختاری به نام درخت مرکل است که تمام تراکنش‌های موجود در بلاک را در خود جای می‌دهد.

درخت مرکل نوعی درخت دودویی است که از مجموعه‌ای از گره‌ها تشکیل شده است: در پایین‌ترین سطح، تعداد زیادی گرهٔ برگ قرار دارند که داده‌های اصلی را در خود نگه می‌دارند؛ در سطوح میانی، هر گره برابر با هش دو فرزند خود است؛ و در نهایت، یک گرهٔ ریشه وجود دارد که آن هم از هش دو فرزندش ساخته شده و نمایانگر «بالای» درخت است.

هدف درخت مرکل این است که امکان ارسال داده‌های یک بلاک به‌صورت بخش‌به‌بخش فراهم شود. یک گره می‌تواند سرآیند بلاک را از یک منبع دریافت کند، بخش کوچکی از درخت که به تراکنش‌های موردنظرش مربوط است را از منبعی دیگر دانلود کند، و همچنان از صحت تمام داده‌ها اطمینان داشته باشد.

دلیل کارکرد این سازوکار آن است که هش‌ها به سمت بالا انتشار پیدا می‌کنند. اگر یک کاربر مخرب تلاش کند یک تراکنش جعلی را در پایین‌ترین سطح درخت مرکل جایگزین کند، این تغییر باعث تغییر گرهٔ بالادستی، سپس گره‌های بالاتر و در نهایت ریشهٔ درخت می‌شود. در نتیجه، هش بلاک تغییر می‌کند و پروتکل آن را به‌عنوان یک بلاک کاملاً متفاوت — و تقریباً به‌طور قطع با اثبات کار نامعتبر — شناسایی می‌کند.

Page 9

پروتکل درخت مرکل را می‌توان یکی از ارکان اصلی پایداری بلندمدت شبکه دانست. یک «گرهٔ کامل» (Full Node) در شبکهٔ بیت‌کوین — که تمام بلاک‌ها را به‌طور کامل ذخیره و پردازش می‌کند — تا آوریل ۲۰۱۴ حدود ۱۵ گیگابایت فضای ذخیره‌سازی اشغال می‌کرد و این مقدار هر ماه بیش از یک گیگابایت افزایش می‌یافت. در حال حاضر، این میزان برای برخی رایانه‌های رومیزی قابل‌تحمل است، اما برای تلفن‌های همراه مناسب نیست و در آینده احتمالاً تنها کسب‌وکارها و علاقه‌مندان حرفه‌ای قادر به مشارکت خواهند بود.

پروتکلی به نام «اعتبارسنجی سادهٔ پرداخت» (Simplified Payment Verification یا SPV) امکان شکل‌گیری دستهٔ دیگری از گره‌ها را فراهم می‌کند که به آن‌ها «گره‌های سبک» (Light Nodes) گفته می‌شود. این گره‌ها تنها سرآیند بلاک‌ها را دانلود می‌کنند، اثبات کار آن‌ها را بررسی می‌کنند و سپس فقط شاخه‌هایی از درخت مرکل را دریافت می‌کنند که به تراکنش‌های مرتبط با آن‌ها مربوط است.

این روش به گره‌های سبک اجازه می‌دهد با تضمین امنیتی قوی، وضعیت هر تراکنش بیت‌کوین و موجودی فعلی خود را تعیین کنند؛ آن هم در حالی که تنها بخش بسیار کوچکی از کل بلاکچین را دانلود کرده‌اند.

Page 10
