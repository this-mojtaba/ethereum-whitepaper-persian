# اسکریپت‌نویسی

(Scripting)

حتی بدون هیچ‌گونه افزونه‌ای، پروتکل بیت‌کوین در عمل نسخه‌ای ضعیف از مفهوم «قراردادهای هوشمند» (Smart Contracts) را فراهم می‌کند. در بیت‌کوین، خروجی‌های خرج‌نشدهٔ تراکنش‌ها یا UTXOها می‌توانند نه‌تنها تحت مالکیت یک کلید عمومی، بلکه تحت مالکیت یک اسکریپت پیچیده‌تر نیز قرار گیرند؛ اسکریپتی که در قالب یک زبان برنامه‌نویسی ساده و مبتنی بر پشته (Stack-Based) بیان می‌شود. در این چارچوب، تراکنشی که قصد خرج‌کردن یک UTXO را دارد، باید داده‌ای ارائه دهد که شرایط آن اسکریپت را برآورده کند.

Page 11

در واقع، حتی سازوکار پایهٔ مالکیت مبتنی بر کلید عمومی نیز از طریق یک اسکریپت پیاده‌سازی شده است: اسکریپت، یک امضای مبتنی بر منحنی بیضوی را به‌عنوان ورودی دریافت می‌کند، آن را با تراکنش و آدرسی که مالک UTXO است تطبیق می‌دهد و در صورت موفقیت‌آمیز بودن اعتبارسنجی، مقدار ۱ و در غیر این صورت مقدار ۰ بازمی‌گرداند. افزون بر این، اسکریپت‌های پیچیده‌تری نیز برای کاربردهای متنوع دیگر وجود دارند.

برای مثال، می‌توان اسکریپتی ساخت که برای معتبرشناخته‌شدن، نیازمند امضای دو مورد از سه کلید خصوصی مشخص باشد («چندامضایی» یا Multisig)؛ ساختاری که برای حساب‌های سازمانی، حساب‌های پس‌انداز امن و برخی سناریوهای امانت‌داری تجاری کاربرد دارد. همچنین از اسکریپت‌ها می‌توان برای پرداخت پاداش در ازای حل مسائل محاسباتی استفاده کرد، و حتی می‌توان اسکریپتی تعریف کرد که چیزی شبیه به این بگوید: «این UTXO بیت‌کوین متعلق به توست، اگر بتوانی یک اثبات SPV ارائه دهی که نشان دهد تراکنشی از این مقدار در شبکهٔ دوج‌کوین برای من ارسال کرده‌ای»؛ قابلیتی که عملاً امکان تبادل غیرمتمرکز میان رمزارزهای مختلف را فراهم می‌کند.

با این حال، زبان اسکریپت‌نویسی بیت‌کوین در شکل فعلی خود دارای محدودیت‌های مهمی است:

**نخست، نبودِ تورینگ‌کامل‌بودن (Turing-Completeness).**  
به این معنا که هرچند زبان اسکریپت بیت‌کوین از مجموعهٔ بزرگی از محاسبات پشتیبانی می‌کند، اما تقریباً همهٔ آن‌ها را پوشش نمی‌دهد. مهم‌ترین قابلیتِ غایب، حلقه‌ها هستند. این محدودیت به‌منظور جلوگیری از ایجاد حلقه‌های بی‌نهایت در زمان اعتبارسنجی تراکنش‌ها اعمال شده است. از نظر تئوری، این مانع قابل دورزدن است؛ چرا که هر حلقه‌ای را می‌توان با تکرار دستی کد و استفاده از شرط‌ها شبیه‌سازی کرد، اما در عمل این کار منجر به اسکریپت‌هایی بسیار ناکارآمد از نظر حجم می‌شود. برای نمونه، پیاده‌سازی یک الگوریتم جایگزین برای امضای مبتنی بر منحنی بیضوی احتمالاً نیازمند ۲۵۶ مرحلهٔ ضرب تکرارشونده است که هرکدام باید به‌صورت جداگانه در کد گنجانده شوند.

**دوم، ناآگاهی از مقدار (Value-Blindness).**  
اسکریپت‌های UTXO هیچ راهی برای اعمال کنترل دقیق بر مقدار قابل برداشت ندارند. برای مثال، یکی از کاربردهای قدرتمند قراردادهای مبتنی بر اوراکل می‌تواند یک قرارداد پوشش ریسک باشد؛ جایی که A و B هرکدام معادل ۱۰۰۰ دلار بیت‌کوین واریز می‌کنند و پس از ۳۰ روز، اسکریپت ۱۰۰۰ دلار بیت‌کوین به A و باقی‌مانده را به B ارسال می‌کند. این سازوکار مستلزم وجود یک اوراکل برای تعیین ارزش بیت‌کوین نسبت به دلار است، اما حتی در این حالت نیز از نظر نیاز به اعتماد و زیرساخت، پیشرفتی چشمگیر نسبت به راه‌حل‌های کاملاً متمرکز فعلی به شمار می‌رود. با این حال، از آنجا که UTXOها ماهیتی «همه یا هیچ» دارند، تنها راه دستیابی به چنین رفتاری استفاده از روشی بسیار ناکارآمد است؛ یعنی ایجاد تعداد زیادی UTXO با مقادیر متفاوت و واگذاری تصمیم به اوراکل برای انتخاب اینکه کدام UTXO به A و کدام به B ارسال شود.

Page 12

**سوم، نبودِ وضعیت (State).**  
یک UTXO یا خرج می‌شود یا خرج‌نشده باقی می‌ماند و هیچ امکان دیگری برای نگه‌داری وضعیت داخلی وجود ندارد. این موضوع ساخت قراردادهای چندمرحله‌ای، پیشنهادهای صرافی غیرمتمرکز یا پروتکل‌های تعهد رمزنگاری دومرحله‌ای را دشوار می‌کند. همچنین این محدودیت به این معناست که UTXOها تنها برای قراردادهای ساده و یک‌بارمصرف مناسب‌اند و نمی‌توان از آن‌ها برای قراردادهای دارای وضعیت پیچیده‌تر مانند سازمان‌های غیرمتمرکز استفاده کرد؛ امری که پیاده‌سازی متاپروتکل‌ها را نیز با مشکل مواجه می‌سازد. ترکیب وضعیت دودویی با ناآگاهی از مقدار، باعث می‌شود یکی دیگر از کاربردهای مهم، یعنی تعیین سقف برداشت، عملاً غیرممکن باشد.

**چهارم، ناآگاهی از بلاکچین (Blockchain-Blindness).**  
اسکریپت‌های UTXO به داده‌های بلاکچین مانند نانس یا هش بلاک قبلی دسترسی ندارند. این موضوع کاربردهایی مانند قمار و چندین دستهٔ دیگر را به‌شدت محدود می‌کند، چرا که زبان اسکریپت را از یک منبع بالقوهٔ ارزشمند برای تولید تصادفی‌بودن محروم می‌سازد.

در نتیجه، می‌توان سه رویکرد اصلی برای ساخت کاربردهای پیشرفته بر بستر رمزارزها شناسایی کرد: ساخت یک بلاکچین جدید، استفاده از اسکریپت‌نویسی بر بستر بیت‌کوین، و ایجاد یک متاپروتکل بر روی بیت‌کوین. ساخت بلاکچین جدید آزادی کامل در طراحی قابلیت‌ها را فراهم می‌کند، اما مستلزم صرف زمان توسعه و تلاش فراوان برای راه‌اندازی اولیه است. استفاده از اسکریپت‌نویسی ساده و استانداردپذیر است، اما به‌شدت از نظر قابلیت محدود است؛ و متاپروتکل‌ها، هرچند پیاده‌سازی ساده‌ای دارند، از مشکلات جدی در مقیاس‌پذیری رنج می‌برند. هدف اتریوم آن است که چارچوبی عمومی ایجاد کند که مزایای هر سه رویکرد را به‌طور هم‌زمان در اختیار بگذارد.
