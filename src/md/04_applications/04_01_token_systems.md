# سیستم‌های توکن

(Token Systems)

سیستم‌های توکن روی بلاکچین کاربردهای گسترده‌ای دارند؛ از ارزهای فرعی که نمایانگر دارایی‌هایی مانند دلار آمریکا یا طلا هستند، تا سهام شرکت‌ها، توکن‌های منفرد نمایانگر مالکیت هوشمند، کوپن‌های امن و غیرقابل‌جعل، و حتی سیستم‌های توکنی که هیچ ارتباطی با ارزش‌های متعارف ندارند و صرفاً به‌عنوان سیستم‌های امتیازدهی برای ایجاد انگیزه استفاده می‌شوند.

پیاده‌سازی سیستم‌های توکن در اتریوم به‌طور شگفت‌آوری ساده است. نکتهٔ کلیدی که باید درک شود این است که یک ارز — یا به‌طور کلی یک سیستم توکن — در بنیاد خود چیزی جز یک پایگاه داده با یک عملیات اصلی نیست: کم‌کردن X واحد از A و افزودن X واحد به B، مشروط بر این‌که (۱) حساب A پیش از تراکنش حداقل X واحد موجودی داشته باشد و (۲) تراکنش توسط A تأیید شده باشد. برای پیاده‌سازی یک سیستم توکن، تنها کافی است این منطق در قالب یک قرارداد پیاده‌سازی شود.

کد پایه برای پیاده‌سازی یک سیستم توکن در زبان Serpent به‌شکل زیر است:

from = msg.sender
to = msg.data[0]
value = msg.data[1]

if contract.storage[from] >= value:
contract.storage[from] -= value
contract.storage[to] += value

این کد در اصل پیاده‌سازی مستقیم همان تابع انتقال وضعیت «سیستم بانکی» است که پیش‌تر در این سند توضیح داده شد. برای کامل‌تر شدن سیستم، تنها به چند خط کد اضافه نیاز است؛ از جمله برای توزیع اولیهٔ واحدهای پولی، رسیدگی به برخی حالت‌های خاص، و در حالت ایده‌آل، افزودن تابعی که به سایر قراردادها اجازه دهد موجودی یک آدرس را پرس‌وجو کنند. غیر از این موارد، چیز دیگری لازم نیست.

از نظر تئوریک، سیستم‌های توکن مبتنی بر اتریوم که به‌عنوان ارزهای فرعی عمل می‌کنند، می‌توانند یک قابلیت مهم را داشته باشند که در متا‌ارزهای مبتنی بر بیت‌کوین و روی زنجیره وجود ندارد: امکان پرداخت مستقیم کارمزد تراکنش‌ها با همان ارز. پیاده‌سازی این قابلیت به این صورت است که قرارداد، موجودی‌ای از اتر نگه می‌دارد تا اتر مصرف‌شده برای پرداخت کارمزد را به فرستنده بازگرداند، و این موجودی را از طریق جمع‌آوری واحدهای ارز داخلی به‌عنوان کارمزد و فروش مجدد آن‌ها در یک حراج پیوسته و دائمی، دوباره تأمین می‌کند. به این ترتیب، کاربران لازم است حساب خود را یک‌بار با اتر «فعال» کنند، اما پس از آن، این اتر قابل استفادهٔ مجدد خواهد بود؛ زیرا قرارداد در هر بار استفاده، آن را بازپرداخت می‌کند.
